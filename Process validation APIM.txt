@startuml
title Processus de publication d'une API

start

:Dev push code API + IaC;
:Repo Git déclenche pipeline CI/CD;

partition "CI/CD" {
  :Build API;
  :Tests unitaires / intégration;
  :Déploiement backend (K8s/App Service/Container);
}

partition "IaC" {
  :Appliquer template IaC;
  :Créer/MAJ DNS;
  :Configurer Firewall;

  if (Configuration OK ?) then (Oui)
    :Configurer API Gateway;
  else (Non)
    :Refus de publication;
  endif

  :Créer/MAJ API dans APIM;
}

partition "APIM" {
  :Appliquer policies (auth, quotas, logs);
  :Publier dans portail développeur;
  :Validation l'API via APIM;

  if (Tests Dev/PO OK ?) then (Oui)
    :Marquer release comme validée;
  else (Non)
    :Rollback / correction;
  endif

  :Usage de l'API autorisée en prod;
}

stop
@enduml


